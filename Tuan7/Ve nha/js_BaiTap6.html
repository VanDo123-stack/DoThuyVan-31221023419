<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>ƒê·∫°i Chi·∫øn Anh H√πng & R·ªìng Cute</title>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap" rel="stylesheet">
    
    <style>
        /* --- 1. C·∫§U H√åNH GIAO DI·ªÜN CHUNG --- */
        body {
            font-family: 'Nunito', sans-serif;
            background-image: linear-gradient(120deg, #a1c4fd 0%, #c2e9fb 100%); /* N·ªÅn xanh m√°t m·∫ª */
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 0;
            overflow: hidden;
        }

        h1 {
            color: #fff;
            text-shadow: 2px 2px 0px #74b9ff;
            font-size: 36px;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        /* Khung tr√≤ ch∆°i */
        .game-arena {
            background: rgba(255, 255, 255, 0.9);
            width: 800px;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Khu v·ª±c chi·∫øn ƒë·∫•u (2 nh√¢n v·∫≠t) */
        .battle-ground {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-bottom: 30px;
            padding: 0 50px;
            box-sizing: border-box;
        }

        /* Th·∫ª nh√¢n v·∫≠t */
        .char-card {
            text-align: center;
            width: 200px;
            position: relative;
        }

        .char-name {
            font-weight: 900;
            font-size: 20px;
            color: #636e72;
            margin-bottom: 10px;
        }

        /* ·∫¢nh nh√¢n v·∫≠t */
        .char-img {
            width: 150px;
            height: 150px;
            object-fit: contain;
            transition: transform 0.2s;
            filter: drop-shadow(0 10px 5px rgba(0,0,0,0.1));
        }

        /* Thanh m√°u (Health Bar) */
        .hp-bar-bg {
            width: 100%;
            height: 15px;
            background-color: #dfe6e9;
            border-radius: 10px;
            margin-top: 10px;
            overflow: hidden;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
        }

        .hp-fill {
            height: 100%;
            width: 100%;
            border-radius: 10px;
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* M√†u m√°u Hero: Xanh ng·ªçc */
        #heroHP .hp-fill { background-color: #00cec9; }
        /* M√†u m√°u R·ªìng: H·ªìng cam */
        #dragonHP .hp-fill { background-color: #ff7675; }

        .hp-text {
            font-size: 14px;
            font-weight: bold;
            color: #b2bec3;
            margin-top: 5px;
        }

        /* --- 2. HI·ªÜU ·ª®NG ANIMATION (QUAN TR·ªåNG ƒê·ªÇ L·∫§Y ƒêI·ªÇM) --- */
        
        /* Animation: Rung l·∫Øc khi b·ªã ƒë√°nh */
        .shake { animation: shakeAnim 0.5s; }
        @keyframes shakeAnim {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            100% { transform: translate(0, 0) rotate(0deg); }
        }

        /* Animation: T·∫•n c√¥ng (Lao l√™n) */
        .attack-right { animation: lungeRight 0.3s forwards; }
        @keyframes lungeRight { 
            0% { transform: translateX(0); } 
            50% { transform: translateX(100px) scale(1.1); } 
            100% { transform: translateX(0); } 
        }

        .attack-left { animation: lungeLeft 0.3s forwards; }
        @keyframes lungeLeft { 
            0% { transform: translateX(0); } 
            50% { transform: translateX(-100px) scale(1.1); } 
            100% { transform: translateX(0); } 
        }

        /* Animation: N√© ƒë√≤n (M·ªù ƒëi v√† l√πi l·∫°i) */
        .dodge { animation: dodgeAnim 0.5s; }
        @keyframes dodgeAnim {
            0% { opacity: 1; transform: translateX(0); }
            50% { opacity: 0.3; transform: translateX(-20px); }
            100% { opacity: 1; transform: translateX(0); }
        }

        /* Hi·ªáu ·ª©ng s·ªë Damage bay l√™n */
        .damage-number {
            position: absolute;
            top: 20%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 30px;
            font-weight: bold;
            color: #d63031;
            opacity: 0;
            pointer-events: none;
        }
        .float-up { animation: floatUp 1s forwards; }
        @keyframes floatUp {
            0% { opacity: 1; top: 20%; transform: translate(-50%, 0) scale(1); }
            100% { opacity: 0; top: -20%; transform: translate(-50%, 0) scale(1.5); }
        }

        /* --- 3. KHU V·ª∞C ƒêI·ªÄU KHI·ªÇN & LOG --- */
        .controls button {
            background-color: #6c5ce7;
            color: white;
            border: none;
            padding: 15px 50px;
            font-size: 20px;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(108, 92, 231, 0.3);
            transition: all 0.2s;
            font-family: 'Nunito', sans-serif;
        }

        .controls button:hover {
            transform: translateY(-3px);
            background-color: #5849be;
        }
        
        .controls button:disabled {
            background-color: #b2bec3;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* Khung l·ªãch s·ª≠ tr·∫≠n ƒë·∫•u */
        .log-box {
            width: 100%;
            height: 150px;
            margin-top: 20px;
            background: #f1f2f6;
            border-radius: 15px;
            padding: 15px;
            box-sizing: border-box;
            overflow-y: auto;
            text-align: left;
            border: 2px solid #dfe6e9;
        }

        .log-entry { margin-bottom: 5px; font-size: 15px; }
        .log-hero { color: #0984e3; } /* M√†u ch·ªØ log c·ªßa Hero */
        .log-dragon { color: #d63031; } /* M√†u ch·ªØ log c·ªßa R·ªìng */
        .log-system { color: #636e72; font-style: italic; }

    </style>
</head>
<body>

    <h1>‚öîÔ∏è Anh H√πng Di·ªát R·ªìng ‚öîÔ∏è</h1>

    <div class="game-arena">
        <div class="battle-ground">
            
            <div class="char-card" id="hero">
                <div class="char-name">ANH H√ôNG</div>
                <div class="damage-number" id="heroDmgNum">-0</div>
                
                <img src="https://cdn-icons-png.flaticon.com/512/3062/3062837.png" class="char-img" id="heroImg" alt="Knight">
                
                <div class="hp-bar-bg" id="heroHP">
                    <div class="hp-fill" style="width: 100%;"></div>
                </div>
                <div class="hp-text" id="heroHPText">100 / 100</div>
            </div>

            <div style="display: flex; align-items: center; font-size: 40px; color: #fab1a0; font-weight: 900;">VS</div>

            <div class="char-card" id="dragon">
                <div class="char-name">R·ªíNG L·ª¨A</div>
                <div class="damage-number" id="dragonDmgNum">-0</div>
                
                <img src="https://cdn-icons-png.flaticon.com/512/3062/3062634.png" class="char-img" id="dragonImg" alt="Dragon">
                
                <div class="hp-bar-bg" id="dragonHP">
                    <div class="hp-fill" style="width: 100%;"></div>
                </div>
                <div class="hp-text" id="dragonHPText">100 / 100</div>
            </div>
        </div>

        <div class="controls">
            <button id="btnAttack" onclick="turnPlayer()">üî• T·∫§N C√îNG üî•</button>
            <button id="btnReset" onclick="location.reload()" style="display:none; background-color: #00b894;">Ch∆°i l·∫°i</button>
        </div>

        <div class="log-box" id="gameLog">
            <div class="log-entry log-system">Tr·∫≠n ƒë·∫•u b·∫Øt ƒë·∫ßu! H√£y nh·∫•n n√∫t T·∫•n C√¥ng.</div>
        </div>
    </div>

    <script>
        // --- C·∫§U H√åNH TH√îNG S·ªê GAME ---
        var hero = { hp: 100, maxHp: 100, minDmg: 10, maxDmg: 20, dodgeRate: 0.15 }; // 15% n√©
        var dragon = { hp: 100, maxHp: 100, minDmg: 12, maxDmg: 25, dodgeRate: 0.1 }; // 10% n√©
        var isTurn = true; // Bi·∫øn ch·∫∑n spam n√∫t

        // H√†m ghi Log
        function addLog(msg, type) {
            var logBox = document.getElementById("gameLog");
            var div = document.createElement("div");
            div.className = "log-entry " + type;
            div.innerHTML = msg;
            logBox.appendChild(div);
            logBox.scrollTop = logBox.scrollHeight; // T·ª± cu·ªôn xu·ªëng
        }

        // H√†m random s·ªë
        function random(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        // H√†m hi·ªÉn th·ªã Damage bay l√™n
        function showDamage(charId, dmg, isMiss) {
            var el = document.getElementById(charId + "DmgNum");
            el.innerText = isMiss ? "MISS" : "-" + dmg;
            el.style.color = isMiss ? "#b2bec3" : "#d63031";
            
            // Reset animation
            el.classList.remove("float-up");
            void el.offsetWidth; // Trigger reflow
            el.classList.add("float-up");
        }

        // H√†m c·∫≠p nh·∫≠t m√°u tr√™n giao di·ªán
        function updateUI() {
            // Hero
            var heroPercent = (hero.hp / hero.maxHp) * 100;
            document.querySelector("#heroHP .hp-fill").style.width = heroPercent + "%";
            document.getElementById("heroHPText").innerText = hero.hp + " / " + hero.maxHp;

            // Dragon
            var dragonPercent = (dragon.hp / dragon.maxHp) * 100;
            document.querySelector("#dragonHP .hp-fill").style.width = dragonPercent + "%";
            document.getElementById("dragonHPText").innerText = dragon.hp + " / " + dragon.maxHp;
        }

        // --- L∆Ø·ª¢T CH∆†I C·ª¶A NG∆Ø·ªúI (KHI B·∫§M N√öT) ---
        function turnPlayer() {
            if (!isTurn) return; // N·∫øu ƒëang ƒë√°nh th√¨ ko b·∫•m ƒë∆∞·ª£c
            isTurn = false;
            document.getElementById("btnAttack").disabled = true;
            document.getElementById("btnAttack").innerText = "ƒêang ƒë√°nh...";

            var heroImg = document.getElementById("heroImg");
            var dragonImg = document.getElementById("dragonImg");

            // 1. Animation Hero T·∫•n c√¥ng
            heroImg.classList.add("attack-right");
            
            setTimeout(function(){
                heroImg.classList.remove("attack-right");
                
                // T√≠nh to√°n s√°t th∆∞∆°ng
                var isMiss = Math.random() < dragon.dodgeRate;
                
                if (isMiss) {
                    addLog("Anh h√πng tung chi√™u nh∆∞ng <b>R·ªìng ƒë√£ n√© ƒë∆∞·ª£c!</b>", "log-system");
                    dragonImg.classList.add("dodge");
                    showDamage("dragon", 0, true);
                } else {
                    var dmg = random(hero.minDmg, hero.maxDmg);
                    dragon.hp -= dmg;
                    if (dragon.hp < 0) dragon.hp = 0;
                    
                    addLog(`Anh h√πng ch√©m R·ªìng m·∫•t <b>${dmg}</b> m√°u!`, "log-hero");
                    dragonImg.classList.add("shake");
                    showDamage("dragon", dmg, false);
                }

                // X√≥a class animation sau khi ch·∫°y xong
                setTimeout(() => {
                    dragonImg.classList.remove("shake");
                    dragonImg.classList.remove("dodge");
                }, 500);

                updateUI();
                checkWinLose();

                // N·∫øu R·ªìng ch∆∞a ch·∫øt th√¨ R·ªìng ƒë√°nh tr·∫£
                if (dragon.hp > 0) {
                    setTimeout(turnDragon, 1200); // ƒê·ª£i 1.2s r·ªìi R·ªìng ƒë√°nh
                }

            }, 300); // ƒê·ª£i animation lao l√™n ch·∫°m v√†o r·ªìng
        }

        // --- L∆Ø·ª¢T C·ª¶A R·ªíNG (T·ª∞ ƒê·ªòNG) ---
        function turnDragon() {
            var heroImg = document.getElementById("heroImg");
            var dragonImg = document.getElementById("dragonImg");

            addLog("R·ªìng ƒëang t√≠ch t·ª• nƒÉng l∆∞·ª£ng...", "log-system");

            // Animation R·ªìng t·∫•n c√¥ng
            dragonImg.classList.add("attack-left");

            setTimeout(function(){
                dragonImg.classList.remove("attack-left");

                var isMiss = Math.random() < hero.dodgeRate;

                if (isMiss) {
                    addLog("R·ªìng phun l·ª≠a nh∆∞ng <b>B·∫°n ƒë√£ n√© c·ª±c hay!</b>", "log-system");
                    heroImg.classList.add("dodge");
                    showDamage("hero", 0, true);
                } else {
                    var dmg = random(dragon.minDmg, dragon.maxDmg);
                    hero.hp -= dmg;
                    if (hero.hp < 0) hero.hp = 0;

                    addLog(`R·ªìng phun l·ª≠a thi√™u ƒë·ªët b·∫°n m·∫•t <b>${dmg}</b> m√°u!`, "log-dragon");
                    heroImg.classList.add("shake");
                    showDamage("hero", dmg, false);
                }

                setTimeout(() => {
                    heroImg.classList.remove("shake");
                    heroImg.classList.remove("dodge");
                }, 500);

                updateUI();
                checkWinLose();

                // Tr·∫£ l∆∞·ª£t l·∫°i cho ng∆∞·ªùi ch∆°i (n·∫øu ch∆∞a ch·∫øt)
                if (hero.hp > 0) {
                    isTurn = true;
                    document.getElementById("btnAttack").disabled = false;
                    document.getElementById("btnAttack").innerText = "üî• T·∫§N C√îNG üî•";
                }

            }, 300);
        }

        // --- KI·ªÇM TRA TH·∫ÆNG THUA ---
        function checkWinLose() {
            if (dragon.hp <= 0) {
                document.getElementById("dragonImg").style.opacity = "0.2"; // R·ªìng m·ªù ƒëi (ch·∫øt)
                addLog("üéâ CH√öC M·ª™NG! B·∫†N ƒê√É TI√äU DI·ªÜT ƒê∆Ø·ª¢C R·ªíNG!", "log-hero");
                endGame(true);
            } else if (hero.hp <= 0) {
                document.getElementById("heroImg").style.opacity = "0.2";
                addLog("üíÄ B·∫†N ƒê√É HY SINH... GAME OVER!", "log-dragon");
                endGame(false);
            }
        }

        function endGame(isWin) {
            isTurn = false; // Kh√≥a game
            document.getElementById("btnAttack").style.display = "none";
            document.getElementById("btnReset").style.display = "inline-block";
            
            if(isWin) alert("WIN R·ªíI! R·ªìng ƒë√£ b·ªã ti√™u di·ªát.");
            else alert("THUA R·ªíI! H√£y th·ª≠ l·∫°i.");
        }

    </script>
</body>
</html>